<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">
<title>积分商城</title>
<script>
	var oHtml=document.getElementsByTagName("html")[0];
	var iWidth=document.documentElement.clientWidth;
	iWidth=iWidth>540?540:iWidth;
	oHtml.style.fontSize=iWidth/16+"px";
</script>
</head>
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/swiper.min.css">
<link rel="stylesheet" type="text/css" href="css/css.css">
<link rel="stylesheet" type="text/css" href="css/scrollbar.css">
<script type="application/javascript" src="js/iscroll.js"></script>
<body>
<div id="wrapper">
	<div id="scroller">
<!---->
<div class="top">个人中心</div>
<div class="swiper-container banList">
    <div class="swiper-wrapper">
        <div class="swiper-slide"><img src="images/banner1.jpg"></div>
        <div class="swiper-slide"><img src="images/banner1.jpg"></div>
        <div class="swiper-slide"><img src="images/banner1.jpg"></div>
        <div class="swiper-slide"><img src="images/banner1.jpg"></div>
    </div>
    <div class="swiper-pagination pagBan"></div>
</div>
<div class="seaDiv"><input type="text" placeholder="输入关键字"></div>
<div class="sliDiv">
	<div class="sliDiv1">
    	<p>生活用品</p>
        <div class="sliDiv1_1">
        	<label>喝水杯保温1</label>
            <label>太阳伞自动三折</label>
            <label>维达卫生纸</label>
            <label>化妆镜</label>
        </div>
    </div>
    <div class="sliDiv1">
    	<p>电子产品</p>
        <div class="sliDiv1_1">
        	<label>喝水杯保温2</label>
            <label>太阳伞自动三折</label>
            <label>维达卫生纸</label>
            <label>化妆镜</label>
        </div>
    </div>
    <div class="sliDiv1">
    	<p>硬件类</p>
        <div class="sliDiv1_1">
        	<label>喝水杯保3温</label>
            <label>太阳伞自动三折</label>
            <label>维达卫生纸</label>
            <label>化妆镜</label>
        </div>
    </div>
    <div class="sliDiv1">
    	<p>实用类</p>
        <div class="sliDiv1_1">
        	<label>喝水杯保温4</label>
            <label>太阳伞自动三折</label>
            <label>维达卫生纸</label>
            <label>化妆镜</label>
        </div>
    </div>
</div>    
<!---->
		<ul id="thelist">
			<li class="proList1">
            	<div class="proList1_1"><label>88积分</label><a href="#"><img src="images/listimg1.jpg"></a></div>
                <div class="proList1_2">
                    <p><label>SanDisk闪迪酷刃USB闪存盘16G加密</label><a>立即兑换</a></p>
                </div>
            </li>
			<li class="proList1">
            	<div class="proList1_1"><label>88积分</label><a href="#"><img src="images/listimg1.jpg"></a></div>
                <div class="proList1_2">
                    <p><label>SanDisk闪迪酷刃USB闪存盘16G加密</label><a>立即兑换</a></p>
                </div>
            </li>
			<li class="proList1">
            	<div class="proList1_1"><label>88积分</label><a href="#"><img src="images/listimg1.jpg"></a></div>
                <div class="proList1_2">
                    <p><label>SanDisk闪迪酷刃USB闪存盘16G加密</label><a>立即兑换</a></p>
                </div>
            </li>
            <li class="proList1">
            	<div class="proList1_1"><label>88积分</label><a href="#"><img src="images/listimg1.jpg"></a></div>
                <div class="proList1_2">
                    <p><label>SanDisk闪迪酷刃USB闪存盘16G加密</label><a>立即兑换</a></p>
                </div>
            </li>
		</ul>
		<div id="pullUp">
			<span class="pullUpLabel">上拉加载更多</span>
		</div>
	</div>
</div>
<script src="js/jquery.min.js"></script>
<!-- Swiper JS -->
<script src="js/swiper.min.js"></script>

<!-- Initialize Swiper -->
<script>
$(".sliDiv1 p").click(function(){
	$(this).parent().siblings('.sliDiv1').removeClass('sin');
	if($(this).parent().hasClass('sin')){
		$(this).parent().removeClass('sin');	
	}else{
		$(this).parent().addClass('sin');
	}
})
$(".sliDiv1_1 label").click(function(){
	alert($(this).html());
	$(this).parent().parent().removeClass('sin');	
})

var banList = new Swiper('.banList',{
	autoplay : 3000,
	autoplayDisableOnInteraction: false,
	paginationClickable: true,
	pagination: '.pagBan',
})



var myScroll,pullUpEl,pullUpOffset,generatedCount = 0;
function pullUpAction () {
	setTimeout(function () {	// <-- Simulate network congestion, remove setTimeout from production!
		var el, li, i;
		el = document.getElementById('thelist');

		for (i=0; i<4; i++) {
			/*li = document.createElement('li');
			li.innerText = 'Generated row ' + (++generatedCount);
			el.appendChild(li, el.childNodes[0]);*/
			var liHtml = $('<li class="proList1"><div class="proList1_1"><label>88积分</label><a href="#"><img src="images/listimg1.jpg"></a></div><div class="proList1_2"><p><label>SanDisk闪迪酷刃USB闪存盘16G加密</label><a>立即兑换</a></p></div></li>')
			$("#thelist").append(liHtml);
		}
		
		myScroll.refresh();		// 数据加载完成后，调用界面更新方法 Remember to refresh when contents are loaded (ie: on ajax completion)
	}, 1000);	// <-- Simulate network congestion, remove setTimeout from production!
}

function loaded() {
	pullUpEl = document.getElementById('pullUp');	
	pullUpOffset = pullUpEl.offsetHeight;
	
	myScroll = new iScroll('wrapper', {
		scrollbarClass: 'myScrollbar', /* 重要样式 */
		useTransition: false, /* 此属性不知用意，本人从true改为false */
		onRefresh: function () {
			if (pullUpEl.className.match('loading')) {
				pullUpEl.className = '';
				pullUpEl.querySelector('.pullUpLabel').innerHTML = '上拉加载更多';
			}
		},
		onScrollMove: function () {
			if (this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {
				pullUpEl.className = 'flip';
				pullUpEl.querySelector('.pullUpLabel').innerHTML = '松手开始更新';
				this.maxScrollY = this.maxScrollY;
			} else if (this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {
				pullUpEl.className = '';
				pullUpEl.querySelector('.pullUpLabel').innerHTML = '上拉加载更多';
				this.maxScrollY = pullUpOffset;
			}
		},
		onScrollEnd: function () {
			if (pullUpEl.className.match('flip')) {
				pullUpEl.className = 'loading';
				pullUpEl.querySelector('.pullUpLabel').innerHTML = '加载中';				
				pullUpAction();	// Execute custom function (ajax call?)
			}
		}
	});
	setTimeout(function () { document.getElementById('wrapper').style.left = '0'; }, 800);
}

//初始化绑定iScroll控件 
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', loaded, false);

</script>
<!---->
<div class="bot_bg"></div>
<div class="bottom">
	<div class="bot1"><a href="#"><label>大转盘</label></a></div>
    <div class="bot2 lin"><a href="#"><label>积分商城</label></a></div>
    <div class="bot3"><a href="#"><label>我要赚钱</label></a></div>
    <div class="bot4"><a href="#"><label>个人中心</label></a></div>
</div>
</body>
</html>
